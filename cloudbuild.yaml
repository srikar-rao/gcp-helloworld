steps:
  # Build the JAR
  - name: 'maven:3.3-jdk-8'
    entrypoint: mvn
    args: ['package', '-Dmaven.test.skip=true']

  # Build the Docker image
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'us-central1-docker.pkg.dev/acquired-rarity-431700-f0/gcp-helloworld/gcp-helloworld:${SHORT_SHA}', '.']

  # Push to GCR
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'us-central1-docker.pkg.dev/acquired-rarity-431700-f0/gcp-helloworld/gcp-helloworld:${SHORT_SHA}']

logsBucket: 'gs://srikar-gcp-builds'  # Replace with your Cloud Storage bucket name
options:
  logging: GCS_ONLY
